scripted_gui = {
	sez_city_gui = {
        window_name = "sez_city_window"
        context_type = player_context
    
        visible = {
            check_variable = { sez_gui_var = 1 }
        }
    
        effects = {
            close_button_click = {
                set_variable = { sez_gui_var = 0 }
            }
			westtown_button_click = {
				ROOT = {
                    set_variable = { sez_gui_cons_var = 1 }
					151 = {set_state_flag = SEZ_state_inspected_flag}
                }
			}
            smocinc_button_click = {
				ROOT = {
                    set_variable = { sez_gui_cons_var = 1 }
					720 = {set_state_flag = SEZ_state_inspected_flag}
                }
			}
            nectown_button_click = {
				ROOT = {
                    set_variable = { sez_gui_cons_var = 1 }
					168 = {set_state_flag = SEZ_state_inspected_flag}
                }
			}
            celestial_plaza_button_click = {
				ROOT = {
                    set_variable = { sez_gui_cons_var = 1 }
					676 = {set_state_flag = SEZ_state_inspected_flag}
                }
			}
            pirydeft_button_click = {
				ROOT = {
                    set_variable = { sez_gui_cons_var = 1 }
					667 = {set_state_flag = SEZ_state_inspected_flag}
                }
			}
            gruhmak_button_click = {
				ROOT = {
                    set_variable = { sez_gui_cons_var = 1 }
					677 = {set_state_flag = SEZ_state_inspected_flag}
                }
			}
            jzemrok_button_click = {
				ROOT = {
                    set_variable = { sez_gui_cons_var = 1 }
					163 = {set_state_flag = SEZ_state_inspected_flag}
                }
			}
            northbazaar_button_click = {
				ROOT = {
                    set_variable = { sez_gui_cons_var = 1 }
					733 = {set_state_flag = SEZ_state_inspected_flag}
                }
			}
            centralprincessyn_button_click = {
				ROOT = {
                    set_variable = { sez_gui_cons_var = 1 }
					732 = {set_state_flag = SEZ_state_inspected_flag}
                }
			}
            rodinvale_button_click = {
				ROOT = {
                    set_variable = { sez_gui_cons_var = 1 }
					718 = {set_state_flag = SEZ_state_inspected_flag}
                }
			}
            administration_button_click = {
				ROOT = {
                    set_variable = { sez_gui_cons_var = 1 }
					658 = {set_state_flag = SEZ_state_inspected_flag}
                }
			}
            victorypoint_button_click = {
				ROOT = {
                    set_variable = { sez_gui_cons_var = 1 }
					729 = {set_state_flag = SEZ_state_inspected_flag}
                }
			}
            fortsoarin_button_click = {
				ROOT = {
                    set_variable = { sez_gui_cons_var = 1 }
					159 = {set_state_flag = SEZ_state_inspected_flag}
                }
			}
			
        }
    
        triggers = {
			westtown_button_click_enabled = {
				owns_state = 151
			}
			smocinc_button_click_enabled = {
				owns_state = 720
			}
			nectown_button_click_enabled = {
				owns_state = 168
			}
			celestial_plaza_button_click_enabled = {
				owns_state = 676
			}
			pirydeft_button_click_enabled = {
				owns_state = 667
			}
			gruhmak_button_click_enabled = {
				owns_state = 677
			}
			jzemrok_button_click_enabled = {
				owns_state = 163
			}
			northbazaar_button_click_enabled = {
				owns_state = 733
			}
			centralprincessyn_button_click_enabled = {
				owns_state = 732
			}
			rodinvale_button_click_enabled = {
				owns_state = 718
			}
			administration_button_click_enabled = {
				owns_state = 658
			}
			victorypoint_button_click_enabled = {
				owns_state = 729
			}
			fortsoarin_button_click_enabled = {
				owns_state = 159
			}
        }
    
        dynamic_lists = {
        }
    
        properties = {
		
			westtown_button = {
				image = "[SEZgetWesttown]"
			}
			smocinc_button = {
				image = "[SEZgetSmocinc]"
			}
			nectown_button = {
				image = "[SEZgetNectown]"
			}
			celestial_plaza_button = {
				image = "[SEZgetCelestial]"
			}
			pirydeft_button = {
				image = "[SEZgetPirdeft]"
			}
			gruhmak_button = {
				image = "[SEZgetGruhmak]"
			}
			jzemrok_button = {
				image = "[SEZgetJzemrok]"
			}
			northbazaar_button = {
				image = "[SEZgetNorthbazaar]"
			}
			centralprincessyn_button = {
				image = "[SEZgetCentralprincessyn]"
			}
			rodinvale_button = {
				image = "[SEZgetRodinvale]"
			}
			administration_button = {
				image = "[SEZgetAdministration]"
			}
			victorypoint_button = {
				image = "[SEZgetVictorypoint]"
			}
			fortsoarin_button = {
				image = "[SEZgetFortsoarin]"
			}
        }
    
        ai_enabled = {
            always = no
        }
    
        ai_test_interval = 290  # The higher, the long it takes the ai to do actions
        ai_test_variance = 0.5
    
        ai_check = {
        }
    
        ai_check_scope = {
        }
    
        ai_weights = {
        }
    }
	
	sez_city_construction_menu = {
        window_name = "sez_city_construction_menu_window"
        context_type = player_context
    
		visible = {
            check_variable = { sez_gui_cons_var = 1 }
        }
    
        effects = {
			close_button_click = {
                set_variable = { sez_gui_cons_var = 0 }
				every_owned_state = {
					clr_state_flag =  SEZ_state_inspected_flag
				}
            }
            core_button_click = {
                every_owned_state = {
                    limit = {
                        has_state_flag = SEZ_state_inspected_flag 
                    }
                    add_core_of = ROOT
                }
                add_political_power = -20
            }
            upgrade_civi_button_click = {
                every_owned_state = {
                    limit = {
                        has_state_flag = SEZ_state_inspected_flag 
                    }
                    add_to_variable = {
                        var = SEZ_civilian_dm
                        value = 0.10
                    }
                    add_building_construction = {
                        type = infrastructure
                        level = 1
                    }
                    subtract_from_variable = {
                        var = SEZ_build_points
                        value = 1
                    }
                    set_state_flag = {
                        flag = SEZ_state_construction_active_flag
                        days = 120
                        value = 1
                    }
                }
            }
            upgrade_defense_button_click = {
                every_owned_state = {
                    limit = {
                        has_state_flag = SEZ_state_inspected_flag 
                    }
                    add_to_variable = {
                        var = SEZ_defense_dm
                        value = 0.10
                    }
                    add_building_construction = {
                        type = arms_factory
                        level = 1
                    }
                    add_extra_state_shared_building_slots = 1
                    subtract_from_variable = {
                        var = SEZ_build_points
                        value = 1
                    }
                    set_state_flag = {
                        flag = SEZ_state_construction_active_flag
                        days = 120
                        value = 1
                    }
                }
            }
            upgrade_industry_button_click = {
                every_owned_state = {
                    limit = {
                        has_state_flag = SEZ_state_inspected_flag 
                    }
                    add_to_variable = {
                        var = SEZ_industry_dm
                        value = 0.10
                    }
                    add_building_construction = {
                        type = industrial_complex
                        level = 1
                    }
                    add_extra_state_shared_building_slots = 1
                    subtract_from_variable = {
                        var = SEZ_build_points
                        value = 1
                    }
                    set_state_flag = {
                        flag = SEZ_state_construction_active_flag
                        days = 120
                        value = 1
                    }
                }
            }
            upgrade_naval_button_click = {
                every_owned_state = {
                    limit = {
                        has_state_flag = SEZ_state_inspected_flag 
                    }
                    add_to_variable = {
                        var = SEZ_naval_dm
                        value = 0.10
                    }
                    add_building_construction = {
                        type = dockyard
                        level = 1
                    }
                    add_extra_state_shared_building_slots = 1
                    subtract_from_variable = {
                        var = SEZ_build_points
                        value = 1
                    }
                    set_state_flag = {
                        flag = SEZ_state_construction_active_flag
                        days = 120
                        value = 1
                    }
                }
            }
            upgrade_militarization_button_click = {
                every_owned_state = {
                    limit = {
                        has_state_flag = SEZ_state_inspected_flag 
                    }
                    add_to_variable = {
                        var = SEZ_militarization_dm
                        value = 0.10
                    }
                    add_manpower = 500
                    subtract_from_variable = {
                        var = SEZ_build_points
                        value = 1
                    }
                    set_state_flag = {
                        flag = SEZ_state_construction_active_flag
                        days = 120
                        value = 1
                    }
                    
                }
            }
        }
        triggers = {
            core_button_click_enabled = {
                SEZ_is_coring_allowed = yes
                has_political_power >19
			}
            upgrade_civi_button_click_enabled = {
                any_owned_state = {
                    has_state_flag = SEZ_state_inspected_flag 
                    is_fully_controlled_by = ROOT
                    check_variable = {
                        SEZ_build_points > 0
                    }
                    NOT = { has_state_flag = SEZ_state_construction_active_flag }
                }
			}
            upgrade_defense_button_click_enabled = {
                any_owned_state = {
                    has_state_flag = SEZ_state_inspected_flag 
                    is_fully_controlled_by = ROOT
                    check_variable = {
                        SEZ_build_points > 0
                    }
                    NOT = { has_state_flag = SEZ_state_construction_active_flag }
                }
			}
            upgrade_industry_button_click_enabled = {
                any_owned_state = {
                    has_state_flag = SEZ_state_inspected_flag 
                    is_fully_controlled_by = ROOT
                    check_variable = {
                        SEZ_build_points > 0
                    }
                    NOT = { has_state_flag = SEZ_state_construction_active_flag }
                }
			}
            upgrade_naval_button_click_enabled = {
                any_owned_state = {
                    has_state_flag = SEZ_state_inspected_flag 
                    is_fully_controlled_by = ROOT
                    is_coastal = yes
                    check_variable = {
                        SEZ_build_points > 0
                    }
                    NOT = { has_state_flag = SEZ_state_construction_active_flag }
                }
			}
            upgrade_militarization_button_click_enabled = {
                any_owned_state = {
                    has_state_flag = SEZ_state_inspected_flag 
                    is_fully_controlled_by = ROOT
                    check_variable = {
                        SEZ_build_points > 0
                    }
                    NOT = { has_state_flag = SEZ_state_construction_active_flag }
                }
			}
        }
        dynamic_lists = {
        }
        properties = {
        }
        ai_enabled = {
            always = no
        }
        ai_check = {
        }
        ai_check_scope = {
        }
        ai_weights = {
        }
    }
	
	sez_city_opener = {
        window_name = "sez_city_button_window"
        context_type = player_context
        parent_window_token = politics_tab
    
        visible = {
			OR = {
				tag = SEZ
				tag = RST
				tag = LEE
				tag = NVR
				tag = SDI
				tag = NAC
			}
        }
    
        effects = {
           sez_city_button_click = {
                if = {
                    limit = { check_variable = { sez_gui_var = 1 } }
                    ROOT = {
                        set_variable = { sez_gui_var = 0 }
                    }
                }
                else_if = {
                    limit = { 
                        NOT = { check_variable = { sez_gui_var = 1 } }
                        check_variable = { sez_gui_var > 0 } 
                    }
                    ROOT = {
                        set_variable = { sez_gui_var = 1 }
                    }
                }
                else = {
                    ROOT = {
                        set_variable = { sez_gui_var = 1 }
                    }
                } 
            }

        }

        triggers = {
            
        }
    
        dynamic_lists = {
        }
    
        properties = {
        }
    
        ai_enabled = {
            always = no
        }
    
        #ai_test_interval = 290  # The higher, the long it takes the ai to do actions
        #ai_test_variance = 0.5
    
        ai_check = {
        }
    
        ai_check_scope = {
        }
    
        ai_weights = {
        }
    }
}
