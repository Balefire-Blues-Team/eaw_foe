scripted_gui = {
    mwy_council_gui = {
        window_name = "mwy_council_window"
        context_type = player_context
    
        visible = {
            check_variable = { mwy_ck2_menu_var = 1 }
        }
    
        effects = {
            close_button_click = {
                set_variable = { mwy_ck2_menu_var = 0 }
                set_variable = { mwy_chan_relations_menu_var = 0 }
                set_variable = { mwy_chan_compliance_menu_var = 0 }
            }

            mwy_chancellor_action_button_1_click = {
                if = { 
                    limit = { has_country_flag = chancellor_improving_relations_flag }
                    every_country = {
                        limit = {
                           has_country_flag = has_mwy_chancellor_flag
                        }
                        clr_country_flag = has_mwy_chancellor_flag
                        remove_opinion_modifier = {
                            target = MWY
                            modifier = sent_chancellor
                        }
                    }
                    ROOT = {
                        clr_country_flag = chancellor_improving_relations_flag
                    }
                }
                else = {
                    clear_array = global.chancellor_neighbor_countries_array
                    every_neighbor_country = {
                        limit = {
                            NOT = {
                                tag = ERA
                            }
                        }
                        add_to_array = {
                            array = global.chancellor_neighbor_countries_array
                            value = THIS.id
                        }
                    }
                    
                    set_variable = { mwy_chan_compliance_menu_var = 0 }

                    if = {
                        limit = { check_variable = { mwy_chan_relations_menu_var = 1 } }
                        ROOT = {
                            set_variable = { mwy_chan_relations_menu_var = 0 }
                        }
                    }
                    else = {
                        ROOT = {
                            set_variable = { mwy_chan_relations_menu_var = 1 }
                        }
                    }
                }
            }

            mwy_chancellor_action_button_2_click = {
                if = {
                    limit = { has_country_flag = chancellor_appeasing_nobles_flag }
                    
                    ROOT = {
                        clr_country_flag = chancellor_appeasing_nobles_flag
                    }
                }
                else = {
                    clear_array = global.mwy_feudal_realms_states_array
                    every_state = {
                        limit = {
                            has_state_flag = mwy_feudal_realm_state_flag
                        }
                        add_to_array = {
                            array = global.mwy_feudal_realms_states_array
                            value = THIS.id
                        }
                    }
                    
                    set_variable = { mwy_chan_relations_menu_var = 0 }

                    if = {
                        limit = { check_variable = { mwy_chan_compliance_menu_var = 1 } }
                        ROOT = {
                            set_variable = { mwy_chan_compliance_menu_var = 0 }
                        }
                    }
                    else = {
                        ROOT = {
                            set_variable = { mwy_chan_compliance_menu_var = 1 }
                        }
                    }
                }
            }

            mwy_chancellor_action_button_3_click = {
                if = { 
                    limit = { has_country_flag = chancellor_governance_flag }
                    ROOT = {
                        remove_ideas = MWY_chan_governance_idea
                        clr_country_flag = chancellor_governance_flag
                    }
                }
                else = {
                    set_country_flag = chancellor_governance_flag
                    add_ideas = MWY_chan_governance_idea
                }
            }

            mwy_chancellor_action_button_4_click = {
                if = {
                    limit = { has_country_flag = chancellor_improving_compliance_flag }
                    ROOT = {
                        remove_ideas = MWY_chan_compliance_idea
                        clr_country_flag = chancellor_improving_compliance_flag
                    }
                }
                else = {
                    set_country_flag = chancellor_improving_compliance_flag
                    add_ideas = MWY_chan_compliance_idea
                }
            }
        }
    
        triggers = {
            mwy_chancellor_action_button_1_click_enabled = {
                ROOT = {
                    NOT = {
                        has_country_flag = chancellor_improving_compliance_flag
                        has_country_flag = chancellor_governance_flag
                    }
                }
            }
            mwy_chancellor_action_button_2_click_enabled = {
                ROOT = {
                    NOT = {
                        has_country_flag = chancellor_improving_relations_flag
                        has_country_flag = chancellor_improving_compliance_flag
                        has_country_flag = chancellor_governance_flag
                    }
                }
            }
            mwy_chancellor_action_button_3_click_enabled = {
                ROOT = {
                    NOT = {
                        has_country_flag = chancellor_improving_relations_flag
                        has_country_flag = chancellor_improving_compliance_flag

                    }
                }
            }
            mwy_chancellor_action_button_4_click_enabled = {
                ROOT = {
                    NOT = {
                        has_country_flag = chancellor_improving_relations_flag
                        has_country_flag = chancellor_governance_flag
                    }
                    any_owned_state = {
                        NOT = { is_core_of = PREV }
                        compliance < 100
                    }
                }
            }
        }
    
        dynamic_lists = {
            
        }
    
        properties = {
        }
    
        ai_enabled = {
            always = no
        }
    
        ai_test_interval = 290  # The higher, the long it takes the ai to do actions
        ai_test_variance = 0.5
    
        ai_check = {
        }
    
        ai_check_scope = {
        }
    
        ai_weights = {
        }
    }

    mwy_chancellor_improve_relation_window = {
        window_name = "mwy_chancellor_improve_relation_window"
        context_type = player_context
        parent_window_token = mwy_council_window
    
        visible = {
            check_variable = { mwy_chan_relations_menu_var > 0 }
            check_variable = { mwy_ck2_menu_var = 1 }
        }
    
        effects = {
            close_button_click = {
                set_variable = { mwy_chan_relations_menu_var = 0 }
            }

            entry_button_click = {
                THIS = { 
                    set_country_flag = has_mwy_chancellor_flag
                    add_opinion_modifier = {
                        target = MWY
                        modifier = sent_chancellor
                    }
                }
                ROOT = {
                    set_country_flag = chancellor_improving_relations_flag
                    set_variable = { mwy_chan_relations_menu_var = 0 }
                }
                
            }

        }

        triggers = {
            
        }
    
        dynamic_lists = {
            chancellor_neighbor_countries_gridbox = {
                array = global.chancellor_neighbor_countries_array
                entry_container = chancellor_neighbor_countries_list_entry
                change_scope = yes
            }
        }
    
        properties = {
            entry_flag = {
                image = "[This.GetFlag]"
            }
        }
    
        ai_enabled = {
            always = no
        }
    
        #ai_test_interval = 290  # The higher, the long it takes the ai to do actions
        #ai_test_variance = 0.5
    
        ai_check = {
        }
    
        ai_check_scope = {
        }
    
        ai_weights = {
        }
    }

    mwy_chancellor_noble_window = {
        window_name = "mwy_chancellor_noble_window"
        context_type = player_context
        parent_window_token = mwy_council_window
    
        visible = {
            check_variable = { mwy_chan_compliance_menu_var > 0 }
            check_variable = { mwy_ck2_menu_var = 1 }
        }
    
        effects = {
            close_button_click = {
                set_variable = { mwy_chan_relations_menu_var = 0 }
            }

            entry_button_click = {
                ROOT = { add_to_variable = { mwy_grainlands_opinion = 1 } }

                ROOT = {
                #    set_country_flag = chancellor_appeasing_nobles_flag
                    set_variable = { mwy_chan_compliance_menu_var = 0 }
                }
                
            }

        }

        triggers = {
            maredia_button_click_enabled = {
                69 = { has_state_flag = mwy_feudal_realm_state_flag }
            }

            belle_button_click_enabled = {
                805 = { has_state_flag = mwy_feudal_realm_state_flag }
            }
        }
    
        dynamic_lists = {
        #    chancellor_noble_gridbox = {
        #        array = global.mwy_feudal_realms_states_array
        #        entry_container = chancellor_noble_entry
        #        change_scope = yes
        #    }
        }
    
        properties = {
        }
    
        ai_enabled = {
            always = no
        }
    
        #ai_test_interval = 290  # The higher, the long it takes the ai to do actions
        #ai_test_variance = 0.5
    
        ai_check = {
        }
    
        ai_check_scope = {
        }
    
        ai_weights = {
        }
    }

    mwy_realms_gui = {
        window_name = "mwy_realms_window"
        context_type = player_context
    
        visible = {
            check_variable = { mwy_ck2_menu_var = 2 }
        }
    
        effects = {
            close_button_click = {
                set_variable = { mwy_ck2_menu_var = 0 }
            }
        }
    
        triggers = {

        }
    
        dynamic_lists = {
        }
    
        properties = {
            east_basin_levy_balls = {
                frame = mwy_grainlands_levy_var
            }
            central_basin_levy_balls = {
                frame = mwy_amethyst_levy_var
            }
            maredia_levy_balls = {
                frame = mwy_maredia_levy_var
            }
            radigator_levy_balls = {
                frame = mwy_radigator_levy_var
            }
            swampy_levy_balls = {
                frame = mwy_swampy_levy_var
            }
            peninsula_levy_balls = {
                frame = mwy_peninsula_levy_var
            }
            belle_levy_balls = {
                frame = mwy_belle_levy_var
            }

        }
    
        ai_enabled = {
            always = no
        }
    
        ai_test_interval = 290  # The higher, the long it takes the ai to do actions
        ai_test_variance = 0.5
    
        ai_check = {
        }
    
        ai_check_scope = {
        }
    
        ai_weights = {
        }
    }

    mwy_laws_gui = {
        window_name = "mwy_laws_window"
        context_type = player_context
    
        visible = {
            check_variable = { mwy_ck2_menu_var = 3 }
        }
    
        effects = {
            close_button_click = {
                set_variable = { mwy_ck2_menu_var = 0 }
            }
        }
    
        triggers = {

        }
    
        dynamic_lists = {
        }
    
        properties = {
        }
    
        ai_enabled = {
            always = no
        }
    
        ai_test_interval = 290  # The higher, the long it takes the ai to do actions
        ai_test_variance = 0.5
    
        ai_check = {
        }
    
        ai_check_scope = {
        }
    
        ai_weights = {
        }
    }



    mwy_ck2_politics_buttons = {
        window_name = "mwy_ck2_politics_buttons_window"
        context_type = player_context
        parent_window_token = politics_tab
    
        visible = {
            tag = MWY
        }
    
        effects = {
            mwy_council_button_click = {
                if = {
                    limit = { check_variable = { mwy_ck2_menu_var = 1 } }
                    ROOT = {
                        set_variable = { mwy_ck2_menu_var = 0 }
                    }
                }
                else_if = {
                    limit = { 
                        NOT { check_variable = { mwy_ck2_menu_var = 1 } }
                        check_variable = { mwy_ck2_menu_var > 0 } 
                    }
                    ROOT = {
                        set_variable = { mwy_ck2_menu_var = 1 }
                    }
                }
                else = {
                    ROOT = {
                        set_variable = { mwy_ck2_menu_var = 1 }
                    }
                }

                set_variable = { mwy_chan_relations_menu_var = 0 }
                set_variable = { mwy_chan_compliance_menu_var = 0 }
            }

            mwy_realms_button_click = {
                if = {
                    limit = { check_variable = { mwy_ck2_menu_var = 2 } }
                    ROOT = {
                        set_variable = { mwy_ck2_menu_var = 0 }
                    }
                }
                else_if = {
                    limit = { 
                        NOT { check_variable = { mwy_ck2_menu_var = 2 } }
                        check_variable = { mwy_ck2_menu_var > 0 } 
                    }
                    ROOT = {
                        set_variable = { mwy_ck2_menu_var = 2 }
                    }
                }
                else = {
                    ROOT = {
                        set_variable = { mwy_ck2_menu_var = 2 }
                    }
                } 
            }

            mwy_laws_button_click = {
                if = {
                    limit = { check_variable = { mwy_ck2_menu_var = 3 } }
                    ROOT = {
                        set_variable = { mwy_ck2_menu_var = 0 }
                    }
                }
                else_if = {
                    limit = { 
                        NOT { check_variable = { mwy_ck2_menu_var = 3 } }
                        check_variable = { mwy_ck2_menu_var > 0 } 
                    }
                    ROOT = {
                        set_variable = { mwy_ck2_menu_var = 3 }
                    }
                }
                else = {
                    ROOT = {
                        set_variable = { mwy_ck2_menu_var = 3 }
                    }
                } 
            }
        }

        triggers = {
            
        }
    
        dynamic_lists = {
        }
    
        properties = {

        }
    
        ai_enabled = {
            always = no
        }
    
        #ai_test_interval = 290  # The higher, the long it takes the ai to do actions
        #ai_test_variance = 0.5
    
        ai_check = {
        }
    
        ai_check_scope = {
        }
    
        ai_weights = {
        }
    }
}
