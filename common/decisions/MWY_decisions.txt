MWY_realms_debug_cat = {
	mwy_reset_levies_dec = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}
		visible = {
			#has_ideas = closed_stable_society
			tag = MWY
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision foe_stability_dec"
			set_variable = { mwy_grainlands_levy_var = 5 }
			set_variable = { mwy_amethyst_levy_var = 3 }
			set_variable = { mwy_radigator_levy_var = 1 }
			set_variable = { mwy_swampy_levy_var = 2 }
			set_variable = { mwy_peninsula_levy_var = 3 }
			set_variable = { mwy_belle_levy_var = 1 }
			set_variable = { mwy_maredia_levy_var = 1 }
		}
	}

	mwy_grainlands_good = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}
		visible = {
			#has_ideas = closed_stable_society
			tag = MWY
		}
		highlight_states = {
			state = 553
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision foe_stability_dec"
			set_variable = { mwy_grainlands_opinion = 3 }
			MWY_calc_realm_poor_opinion = yes
		}
	}
	mwy_grainlands_neutral = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}
		visible = {
			#has_ideas = closed_stable_society
			tag = MWY
		}

		highlight_states = {
			state = 553
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision foe_stability_dec"
			set_variable = { mwy_grainlands_opinion = 2 }
			MWY_calc_realm_poor_opinion = yes
		}
	}
	mwy_grainlands_poor = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}
		visible = {
			#has_ideas = closed_stable_society
			tag = MWY
		}

		highlight_states = {
			state = 553
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision foe_stability_dec"
			set_variable = { mwy_grainlands_opinion = 1 }
			MWY_calc_realm_poor_opinion = yes
		}
	}

	mwy_debug_activate_noble_revolt = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}
		visible = {
			#has_ideas = closed_stable_society
			tag = MWY
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision foe_stability_dec"
			activate_decision = MWY_noble_revolt_mission
		}
	}

	mwy_add_appease_nobles = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}
		visible = {
			#has_ideas = closed_stable_society
			tag = MWY
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision foe_stability_dec"
			has_country_flag = chancellor_appeasing_nobles_base_flag
		}
	}

	mwy_reset_laws_dec = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}
		visible = {
			#has_ideas = closed_stable_society
			tag = MWY
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision foe_stability_dec"
			MWY_reset_serf_laws_frames = yes
			set_variable = { serf_laws_var = 1 }
			set_variable = { serf_laws_button_1_frame_var = 2 }

			MWY_reset_centralization_laws_frames = yes
			set_variable = { centralization_laws_var = 1 }
			set_variable = { centralization_laws_button_1_frame_var = 2 }

			MWY_reset_army_laws_frames = yes
			set_variable = { army_laws_var = 2 }
			set_variable = { army_laws_button_2_frame_var = 2 }
			
		}
	}

	mwy_reset_council_approval_dec = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}
		visible = {
			#has_ideas = closed_stable_society
			tag = MWY
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision foe_stability_dec"
			MWY_set_chan_littleward_law_approval = yes
			MWY_set_mar_strongwing_law_approval = yes
			MWY_set_stew_waters_law_approval = yes
			MWY_set_spy_widow_law_approval = yes
			
		}
	}

	mwy_calculate_laws_approval_dec = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}
		visible = {
			#has_ideas = closed_stable_society
			tag = MWY
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision foe_stability_dec"
			MWY_calc_all_laws_approval = yes
			
		}
	}
}

MWY_levy_cat = {
	MWY_noble_revolt_mission = {
		icon = GFX_decision_megaphone

		allowed = {
			original_tag = MWY
		}

		cancel_trigger = {
			custom_trigger_tooltip = {
                tooltip = MWY_less_than_3_angry_realms
                check_variable = { realm_poor_opinion_count_var < 3 } 
            } 
		}
		available = {
			hidden_trigger = {
				always = yes
			}                                    
		}
		activation = {                         
			check_variable = { realm_poor_opinion_count_var > 2 }
			always = no                
		}

		selectable_mission = yes

		days_mission_timeout = 160
		timeout_effect = {
			if = {
				limit = { check_variable = { realm_poor_opinion_count_var = 5 } }
				country_event = newmareway.22
			}
			else = {
				country_event = newmareway.23
				
			}
		}
	}

	MWY_famine_crisis = {
		icon = GFX_decision_megaphone

		allowed = {
			tag = MWY
		}

		cancel_trigger = {
			custom_trigger_tooltip = {
                tooltip = MWY_has_solved_food_store_crisis
                NOT = { has_idea = MWY_low_winter_stores }
            } 
		}
		available = {
			#hidden_trigger = {
			#	always = yes
			#}                                    
		}
		activation = {                         
			has_idea = MWY_low_winter_stores
		}

		#selectable_mission = yes

		days_mission_timeout = 80
		timeout_effect = {
			country_event = newmareway.38
			swap_ideas = {
				remove_idea = MWY_low_winter_stores
				add_idea = MWY_serf_famine
			}
		}
	}

	mwy_raise_all_levies = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}

		available = {
			has_war = yes
		}

		visible = {
			#has_ideas = closed_stable_society
			tag = MWY
		}
		#fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision foe_stability_dec"
			custom_effect_tooltip = MWY_raise_levies_tt
			hidden_effect = {
				MWY_raise_all_levies_effect = yes
				set_country_flag = MWY_raised_levies_flag
			}
		}
	}

	mwy_disband_all_levies = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}

		available = {
			custom_trigger_tooltip = {
                tooltip = MWY_has_levies_raised
                hidden_trigger = { has_country_flag = MWY_raised_levies_flag }
            }
		}

		visible = {
			#has_ideas = closed_stable_society
			tag = MWY
		}
		#fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision foe_stability_dec"
			delete_unit_template_and_units = {
			    division_template = "Commoner Levies"
			}
			if = {
				limit = { has_country_flag = MWY_better_levies_flag }
				division_template = {
				    name = "Commoner Levies"
				    is_locked = yes
				    regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 1 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 1 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 1 y = 2 }
						infantry = { x = 0 y = 3 }
						infantry = { x = 1 y = 3 }
					}
					support = {
						demolitions_support = { x = 0 y = 0 }
					}
				}
			}
			else = {
				division_template = {
				    name = "Commoner Levies"
				    is_locked = yes
				    regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 1 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 1 y = 1 }
						militia = { x = 0 y = 2 }
						militia = { x = 1 y = 2 }
						militia = { x = 0 y = 3 }
						militia = { x = 1 y = 3 }
					}
				}
			}
			clr_country_flag = MWY_raised_levies_flag
		}
	}

	mwy_economic_freedom_bribe_glow = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}

		custom_cost_trigger = {
			has_manpower > 300
			has_political_power > 25
		}
		custom_cost_text = decision_cost_manpower_300_pp_25

		available = {
			custom_trigger_tooltip = {
                tooltip = MWY_chancellor_is_glow_tt
                hidden_trigger = { has_country_flag = MWY_chancellor_flag_glow }
            }
            has_manpower > 300
            has_political_power > 25
		}

		visible = {
			has_completed_focus = MWY_qw_economic_freedom
			NOT = { has_country_flag = MWY_has_bribed_economic_freedom_flag }
			check_variable = { serf_laws_var < 4 }
			tag = MWY
		}
		#fire_only_once = yes

		days_remove = 15
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mwy_economic_freedom_bribe_glow"

			custom_effect_tooltip = MWY_glow_supports_serf_law_4_tt
			hidden_effect = {
				set_country_flag = MWY_chan_always_support_serf_law_4
				set_variable = { serf_laws_button_4_chan_var = 3 }

				MWY_calc_all_laws_approval = yes
			}

			set_country_flag = MWY_has_bribed_economic_freedom_flag
			hidden_effect = { add_political_power = -25 add_manpower = -300}
		}
	}

	mwy_economic_freedom_bribe_waters = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}

		custom_cost_trigger = {
			has_navy_experience > 10
			has_political_power > 25
		}
		custom_cost_text = decision_cost_navy_xp_10_pp_25

		available = {
			custom_trigger_tooltip = {
                tooltip = MWY_steward_is_waters_tt
                hidden_trigger = { has_country_flag = MWY_steward_flag_wavy_waters }
            }
           	has_navy_experience > 10
			has_political_power > 25
		}

		visible = {
			has_completed_focus = MWY_qw_economic_freedom
			NOT = { has_country_flag = MWY_has_bribed_economic_freedom_flag }
			check_variable = { serf_laws_var < 4 }
			tag = MWY
		}
		#fire_only_once = yes

		days_remove = 15
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mwy_economic_freedom_bribe_waters"

			custom_effect_tooltip = MWY_waters_supports_serf_law_4_tt
			hidden_effect = {
				set_country_flag = MWY_waters_always_support_serf_law_4
				set_variable = { serf_laws_button_4_stew_var = 3 }

				MWY_calc_all_laws_approval = yes
			}

			set_country_flag = MWY_has_bribed_economic_freedom_flag
			hidden_effect = { add_political_power = -25 navy_experience = -20 }
		}
	}

	mwy_economic_freedom_bribe_sunflower = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}

		cost = 75

		available = {
			custom_trigger_tooltip = {
                tooltip = MWY_steward_is_sunflower_tt
                hidden_trigger = { has_country_flag = MWY_steward_flag_sunflower }
            }
		}

		visible = {
			has_completed_focus = MWY_qw_economic_freedom
			NOT = { has_country_flag = MWY_has_bribed_economic_freedom_flag }
			check_variable = { serf_laws_var < 4 }
			tag = MWY
		}
		#fire_only_once = yes

		days_remove = 15
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mwy_economic_freedom_bribe_sunflower"

			custom_effect_tooltip = MWY_sunflower_supports_serf_law_4_tt
			hidden_effect = {
				set_country_flag = MWY_sunflower_always_support_serf_law_4
				set_variable = { serf_laws_button_4_stew_var = 3 }

				MWY_calc_all_laws_approval = yes
			}

			set_country_flag = MWY_has_bribed_economic_freedom_flag
			hidden_effect = { add_political_power = -25 }
		}
	}

	mwy_economic_freedom_bribe_strongwing = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}

		custom_cost_trigger = {
			has_equipment = {
    			infantry_equipment > 250
			}
			has_political_power > 25
		}
		custom_cost_text = decision_cost_guns_250_pp_25

		available = {
			custom_trigger_tooltip = {
                tooltip = MWY_marshal_is_strongwing_tt
                hidden_trigger = { has_country_flag = MWY_marshal_flag_strongwing }
            }
            has_equipment = {
    			infantry_equipment > 250
			}
			has_political_power > 25
		}

		visible = {
			has_completed_focus = MWY_qw_economic_freedom
			NOT = { has_country_flag = MWY_has_bribed_economic_freedom_flag }
			check_variable = { serf_laws_var < 4 }
			tag = MWY
		}
		#fire_only_once = yes

		days_remove = 15
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mwy_economic_freedom_bribe_strongwing"

			custom_effect_tooltip = MWY_strongwing_supports_serf_law_4_tt
			hidden_effect = {
				set_country_flag = MWY_strongwing_always_support_serf_law_4
				set_variable = { serf_laws_button_4_mar_var = 3 }

				MWY_calc_all_laws_approval = yes
			}

			set_country_flag = MWY_has_bribed_economic_freedom_flag
			hidden_effect = { 
				add_political_power = -25
				add_equipment_to_stockpile = {
				    type = infantry_equipment
				    amount = 250
				}
			}
		}
	}

	mwy_economic_freedom_bribe_gatormaw = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}

		custom_cost_trigger = {
			has_army_experience > 10
			has_political_power > 25
		}
		custom_cost_text = decision_cost_army_xp_10_pp_25

		available = {
			custom_trigger_tooltip = {
                tooltip = MWY_marshal_is_gatormaw_tt
                hidden_trigger = { has_country_flag = MWY_marshal_flag_gatormaw }
            }
            has_army_experience > 10
            has_political_power > 25
		}

		visible = {
			has_completed_focus = MWY_qw_economic_freedom
			NOT = { has_country_flag = MWY_has_bribed_economic_freedom_flag }
			check_variable = { serf_laws_var < 4 }
			tag = MWY
		}
		#fire_only_once = yes

		days_remove = 15
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mwy_economic_freedom_bribe_gatormaw"

			custom_effect_tooltip = MWY_gatormaw_supports_serf_law_4_tt
			hidden_effect = {
				set_country_flag = MWY_gatormaw_always_support_serf_law_4
				set_variable = { serf_laws_button_4_mar_var = 3 }

				MWY_calc_all_laws_approval = yes
			}

			set_country_flag = MWY_has_bribed_economic_freedom_flag
			hidden_effect = { add_political_power = -25 army_experience = -10 }
		}
	}

	mwy_army_reform_better_levies = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}

		custom_cost_trigger = {
			has_army_experience > 25
			command_power > 25
		}
		custom_cost_text = decision_cost_army_xp_25_CP_25

		available = {
			custom_trigger_tooltip = {
                tooltip = MWY_has_no_levies_raised
                hidden_trigger = { NOT = { has_country_flag = MWY_raised_levies_flag } }
            }
            has_army_experience > 25
            command_power > 25
		}

		visible = {
			#has_completed_focus = MWY_qw_economic_freedom
			#NOT = { has_country_flag = MWY_has_bribed_economic_freedom_flag }
			#check_variable = { serf_laws_var < 4 }
			tag = MWY
		}
		#fire_only_once = yes

		days_remove = 90
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mwy_army_reform_better_levies"

			custom_effect_tooltip = MWY_improves_levies_to_inf_tt
			set_country_flag = MWY_better_levies_flag
			hidden_effect = { army_experience = -5 add_command_power = -25 }
			hidden_effect = {
				delete_unit_template_and_units = {
				    division_template = "Commoner Levies"
				}
				division_template = {
				    name = "Commoner Levies"
				    is_locked = yes
				    regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 1 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 1 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 1 y = 2 }
						infantry = { x = 0 y = 3 }
						infantry = { x = 1 y = 3 }
					}
					support = {
						demolitions_support = { x = 0 y = 0 }
					}
				}
			}
		}
	}

	mwy_army_reform_talon_wargames = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}

		custom_cost_trigger = {
			has_army_experience > 10
			command_power > 50
		}
		custom_cost_text = decision_cost_army_xp_10_CP_50

		available = {
            has_army_experience > 10
            command_power > 50
		}

		visible = {
			#has_completed_focus = MWY_qw_economic_freedom
			#NOT = { has_country_flag = MWY_has_bribed_economic_freedom_flag }
			#check_variable = { serf_laws_var < 4 }
			tag = MWY
		}
		#fire_only_once = yes

		days_remove = 30
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mwy_army_reform_talon_wargames"


			hidden_effect = { army_experience = -10 add_command_power = -50 }
		}
	}

	mwy_army_reform_peony_raid = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}

		custom_cost_trigger = {
			has_army_experience > 10
			command_power > 50
		}
		custom_cost_text = decision_cost_army_xp_10_CP_50

		available = {
            has_army_experience > 10
            command_power > 50
		}

		visible = {
			#has_completed_focus = MWY_qw_economic_freedom
			#NOT = { has_country_flag = MWY_has_bribed_economic_freedom_flag }
			#check_variable = { serf_laws_var < 4 }
			tag = MWY
		}
		#fire_only_once = yes

		days_remove = 30
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mwy_army_reform_peony_raid"


			hidden_effect = { army_experience = -10 add_command_power = -50 }
		}
	}

	mwy_army_reform_prepare_warplan_red = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}

		custom_cost_trigger = {
			has_army_experience > 5
			command_power > 30
		}
		custom_cost_text = decision_cost_army_xp_5_CP_30

		available = {
            has_army_experience > 5
            command_power > 30
		}

		visible = {
			#has_completed_focus = MWY_qw_economic_freedom
			#NOT = { has_country_flag = MWY_has_bribed_economic_freedom_flag }
			#check_variable = { serf_laws_var < 4 }
			tag = MWY
		}
		#fire_only_once = yes

		days_remove = 180
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mwy_army_reform_prepare_warplan_red"


			hidden_effect = { army_experience = -5 add_command_power = -30 }
		}
	}

	mwy_army_reform_prepare_warplan_blue = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}

		custom_cost_trigger = {
			has_army_experience > 5
			command_power > 30
		}
		custom_cost_text = decision_cost_army_xp_5_CP_30

		available = {
            has_army_experience > 5
            command_power > 30
		}

		visible = {
			#has_completed_focus = MWY_qw_economic_freedom
			#NOT = { has_country_flag = MWY_has_bribed_economic_freedom_flag }
			#check_variable = { serf_laws_var < 4 }
			tag = MWY
		}
		#fire_only_once = yes

		days_remove = 180
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mwy_army_reform_prepare_warplan_blue"


			hidden_effect = { army_experience = -5 add_command_power = -30 }
		}
	}

	mwy_army_reform_prepare_warplan_orange = {
		icon = GFX_decision_stable_door
		ai_will_do = {
			base = 0
		}

		custom_cost_trigger = {
			has_army_experience > 5
			command_power > 30
		}
		custom_cost_text = decision_cost_army_xp_5_CP_30

		available = {
            has_army_experience > 5
            command_power > 30
		}

		visible = {
			#has_completed_focus = MWY_qw_economic_freedom
			#NOT = { has_country_flag = MWY_has_bribed_economic_freedom_flag }
			#check_variable = { serf_laws_var < 4 }
			tag = MWY
		}
		#fire_only_once = yes

		days_remove = 180
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mwy_army_reform_prepare_warplan_orange"


			hidden_effect = { army_experience = -5 add_command_power = -30 }
		}
	}
}
