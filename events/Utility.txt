add_namespace = utility

country_event = { ### SOL
	id = utility.9
	immediate = {log = "[GetDateText]: [Root.GetName]: event utility.9"}
	hidden = yes
	is_triggered_only = yes
	option = {
		restore_previous_manpower_function = yes
	}
}

country_event = { ### Healing Megaspell Effect
	id = utility.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event utility.1"}
	hidden = yes
	is_triggered_only = yes
	option = {
		ROOT = {
			subtract_from_variable = {
			    var = healing_spell_amount
			    value = 1
			}
		}
	}
}

country_event = { ### Celestia One Cooldown Start
	id = utility.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event utility.2"}
	hidden = yes
	is_triggered_only = yes
	option = {
		ROOT = {
			set_country_flag = celestia_one_cooldown_flag
			country_event = {
				id = utility.3
				days = 365
			}
		}
	}
}

country_event = { ### Celestia One Cooldown End
	id = utility.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event utility.3"}
	hidden = yes
	is_triggered_only = yes
	option = {
		ROOT = {
			clr_country_flag = celestia_one_cooldown_flag
		}
	}
}

country_event = { ### Don't Play OWE
	id = utility.4
	title = utility.4.t
	desc = utility.4.desc
	immediate = {log = "[GetDateText]: [Root.GetName]: event utility.4"}
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = utility.4.a
		ai_chance = { base = 0}
		add_political_power = -2000
		RED = { change_tag_from = ROOT }
	}
}

country_event = { ### Shatter Pryncessin Zone
	id = utility.5
	title = utility.5.t
	desc = utility.5.desc
	immediate = {log = "[GetDateText]: [Root.GetName]: event utility.5"}
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = utility.5.a
		ai_chance = { base = 0}
		729 = { add_core_of = RST}
		159 = { add_core_of = RST}
		SEZ = { release = RST }
		733 = { add_core_of = LEE}
		732 = { add_core_of = LEE}
		SEZ = { release = LEE }
		151 = { add_core_of = NVR}
		718 = { add_core_of = NVR}
		SEZ = { release = NVR }
		720 = { add_core_of = NAC}
		168 = { add_core_of = NAC}
		SEZ = { release = NAC }
		667 = { add_core_of = SDI}
		676 = { add_core_of = SDI}
		163 = { add_core_of = SDI}
		SEZ = { release = SDI }
	}
}	

country_event = { ### RED Explosion Game Rule
	id = utility.5
	title = utility.5.title
	desc = utility.5.desc
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event utility.5"
		hidden_effect = {
			CAT = {
				add_state_core = 593
				add_state_core = 513
				add_state_core = 505
				add_state_core = 492
				add_state_core = 533
				add_state_core = 510

				transfer_state = 593
				transfer_state = 513
				transfer_state = 505
				transfer_state = 492
				transfer_state = 533
				transfer_state = 510
				
				transfer_technology = yes
			}
			every_unit_leader = {
				limit = {
					has_id = 59304
				}
				set_nationality = CAT
			}

			FLT = {
				add_state_core = 529
				add_state_core = 504
				add_state_core = 502
				add_state_core = 50
				add_state_core = 512
				add_state_core = 523

				transfer_state = 529
				transfer_state = 504
				transfer_state = 502
				transfer_state = 50
				transfer_state = 512
				transfer_state = 523
				
				transfer_technology = yes
			}

			every_state = {
				limit = {
					OR = {
						is_core_of = CAT
						is_core_of = FLT
					}
				}
				teleport_armies = {
				    limit = {
				        tag = RED
				    }
				    to_state = 532
				}
			}
		}
	}
	is_triggered_only = yes
	fire_only_once = yes

	option = { #Fillydelphia
		name = utility.5.a
		ai_chance = { base = 10 }
		remove_ideas = {
			slave_resistance
			fractured_comm
			army_chaos
		}
		white_peace = SSC
		custom_effect_tooltip = load_generic_focus_tree_tt
		hidden_effect = {
			load_focus_tree = gensettlers
			set_country_flag = change_to_settler_tree_flag
			mark_focus_tree_layout_dirty = yes
		}
	}
	option = { #Cathedral
		name = utility.5.b
		ai_chance = { base = 0 }
		CAT = { change_tag_from = ROOT }
		hidden_effect = {
			RED = {
				load_focus_tree = gensettlers
				set_country_flag = change_to_settler_tree_flag
				mark_focus_tree_layout_dirty = yes
				remove_ideas = {
					slave_resistance
					fractured_comm
					army_chaos
				}
				white_peace = SSC
			}
		}
	}
	option = { #Flatlanders
		name = utility.5.c
		ai_chance = { base = 0 }
		FLT = { change_tag_from = ROOT }
		hidden_effect = {
			RED = {
				load_focus_tree = gensettlers
				set_country_flag = change_to_settler_tree_flag
				mark_focus_tree_layout_dirty = yes
				remove_ideas = {
					slave_resistance
					fractured_comm
					army_chaos
				}
				white_peace = SSC
			}
		}
	}
}

country_event = { ### SSC Explosion Game Rule
	id = utility.6
	title = utility.6.title
	desc = utility.6.desc
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event utility.6"
		hidden_effect = {
			SSC = {
				remove_state_core = 554
				remove_state_core = 487
				remove_state_core = 85
				remove_state_core = 5
				remove_state_core = 546

				delete_unit_template_and_units = {
					division_template = "Raider Warband"
				}
			}
			SSS = {
				transfer_state = 85
				transfer_state = 5
				transfer_state = 546
				
				transfer_technology = yes
			}

			SSR = {
				transfer_state = 554
				transfer_state = 487
				
				transfer_technology = yes
			}

			FSR = {
				transfer_state = 543
			}

			every_state = {
				limit = {
					OR = {
						is_core_of = SSS
						is_core_of = SSR
					}
				}
				teleport_armies = {
				    limit = {
				        tag = SSC
				    }
				    to_state = 558
				}
			}
		}
	}
	is_triggered_only = yes
	fire_only_once = yes

	option = { #Sunny Shoals
		name = utility.6.a
		ai_chance = { base = 10 }
		remove_ideas = {
			SSC_fractured_coalition
		}
		set_cosmetic_tag = SSC_shoals
	}
	option = { #Hoofsburg
		name = utility.6.b
		ai_chance = { base = 0 }
		SSS = { change_tag_from = ROOT }
		hidden_effect = {
			SSC = {
				remove_ideas = {
					SSC_fractured_coalition
				}
				set_cosmetic_tag = SSC_shoals
			}
		}
	}
	option = { #Raiders
		name = utility.6.c
		ai_chance = { base = 0 }
		SSR = { change_tag_from = ROOT }
		hidden_effect = {
			SSC = {
				remove_ideas = {
					SSC_fractured_coalition
				}
				set_cosmetic_tag = SSC_shoals
			}
		}
	}
}