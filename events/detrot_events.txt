add_namespace = detrotevent

country_event = {
	id = detrotevent.1
	title = detrotevent.1.t
	desc = detrotevent.1.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.1.a
		ai_chance = { factor = 1000}
		capital_scope = {
			add_building_construction = {
				type = arms_factory
				level = 1
			}
		}
		add_tech_bonus = {
			name = electronics_bonus
			bonus = 0.8
			uses = 1
			category = vehicle_tech
		}
	}

	option = {
		name = detrotevent.1.b
		ai_chance = { factor = 100}
		capital_scope = {
			add_building_construction = {
				type = industrial_complex
				level = 1
			}
			add_building_construction = {
				type = infrastructure
				level = 1
			}
		}
	}

	option = {
		name = detrotevent.1.c
		ai_chance = { factor = 10}
		capital_scope = {
			add_manpower = 2500
			add_extra_state_shared_building_slots = 2
		}
	}
}

country_event = {
	id = detrotevent.2
	title = detrotevent.2.t
	desc = detrotevent.2.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.2.a
		ai_chance = { factor = 100}
		custom_effect_tooltip = foe_6_gain_slave_tt
			add_to_variable = {
				var = foe_slaves_var
				value = 6
		}
		add_stability = -0.04
	}

	option = {
		name = detrotevent.2.b
		ai_chance = { factor = 1}
		add_stability = 0.04
		upgrade_intelligence_agency = upgrade_economy_civilian
		upgrade_intelligence_agency = upgrade_army_department
		DEC_increase_influence_1 = yes
	}
}

country_event = {
	id = detrotevent.3
	title = detrotevent.3.t
	desc = detrotevent.3.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.3.a
		ai_chance = { factor = 100}
		DEC_increase_influence_1 = yes
		add_war_support = 0.04
		hidden_effect = {
			country_event = { id = detrotevent.4 days = 10 }
		}
	}

	option = {
		name = detrotevent.3.b
		ai_chance = { factor = 100}
		DEC_decrease_loyalty = yes
		hidden_effect = {
			country_event = { id = detrotevent.4 days = 10 }
		}
	}
}

country_event = {
	id = detrotevent.4
	title = detrotevent.4.t
	desc = detrotevent.4.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.4.a
		ai_chance = { factor = 100}
		hidden_effect = {
			country_event = { id = detrotevent.5 days = 10 }
		}
	}
}

country_event = {
	id = detrotevent.5
	title = detrotevent.5.t
	desc = detrotevent.5.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.5.a
		ai_chance = { factor = 50}
		add_popularity = {
			ideology = visionary
			popularity = 0.03 #40
		}
		capital_scope = {
			damage_building = {
				type = arms_factory
				damage = 10
			}
			damage_building = {
				type = industrial_complex
				damage = 5
			}
			damage_building = {
				type = infrastructure
				damage = 15
			}
		}
		hidden_effect = {
			country_event = { id = detrotevent.6 days = 45 }
		}
	}

	option = {
		name = detrotevent.5.b
		ai_chance = { factor = 50}
		add_popularity = {
			ideology = visionary
			popularity = 0.07 #36
		}
		add_stability = -0.02
		hidden_effect = {
			country_event = { id = detrotevent.6 days = 45 }
		}
	}
}

country_event = {
	id = detrotevent.6
	title = detrotevent.6.t
	desc = detrotevent.6.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.6.a
		ai_chance = { factor = 100}
		capital_scope = {
			add_manpower = -195
		}
		add_stability = -0.04
		add_popularity = {
			ideology = visionary
			popularity = 0.04 #32
		}
		hidden_effect = {
			country_event = { id = detrotevent.7 days = 50 }
		}
	}

	option = {
		name = detrotevent.6.b
		ai_chance = { factor = 100}
		add_popularity = {
			ideology = visionary
			popularity = 0.08 #28
		}
		add_manpower = -21
		add_war_support = -0.04
		hidden_effect = {
			country_event = { id = detrotevent.7 days = 50 }
		}
	}
}

country_event = {
	id = detrotevent.7
	title = detrotevent.7.t
	desc = detrotevent.7.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.7.a
		ai_chance = { factor = 100}
		add_political_power = -20
		add_stability = -0.02
		add_popularity = {
			ideology = visionary
			popularity = -0.04 #32
		}
	}

	option = {
		name = detrotevent.7.b
		ai_chance = { factor = 100}
		add_popularity = {
			ideology = visionary
			popularity = 0.08 #20
		}
		add_political_power = 40
	}

	option = {
		name = detrotevent.7.c
		ai_chance = { factor = 50}
		add_popularity = {
			ideology = visionary
			popularity = 0.1 #18
		}
		capital_scope = {
			add_manpower = -500
		}
		152 = {
			add_manpower = 500
		}
		add_stability = 0.04
		custom_effect_tooltip = DEC_sterling_power_tt
		IF = {
			limit = {
				NOT = {
					OR = {
						has_country_flag = DEC_sterling_infl_1_flag
						has_country_flag = DEC_sterling_infl_2_flag
						has_country_flag = DEC_sterling_infl_3_flag
					}
				}
			}
			set_country_flag = DEC_sterling_infl_1_flag
		}
		ELSE_IF = {
			limit = {
				has_country_flag = DEC_sterling_infl_1_flag
			}
			clr_country_flag = DEC_sterling_infl_1_flag
			set_country_flag = DEC_sterling_infl_2_flag
		}
		ELSE_IF = {
			limit = {
				has_country_flag = DEC_sterling_infl_2_flag
			}
			clr_country_flag = DEC_sterling_infl_2_flag
			set_country_flag = DEC_sterling_infl_3_flag
		}
	}
}

country_event = {
	id = detrotevent.8
	title = detrotevent.8.t
	desc = detrotevent.8.d

	trigger = {
		tag = DEC
		COR = { exists = yes }
	}
 	fire_only_once = yes

 	option = {
		name = detrotevent.8.a
		ai_chance = { factor = 100}
		add_political_power = -60
		add_popularity = {
			ideology = visionary
			popularity = 0.02 #16
		}
		hidden_effect = {
			country_event = { id = detrotevent.9 days = 40 }
		}
	}

	option = {
		name = detrotevent.8.b
		ai_chance = { factor = 50}
		add_popularity = {
			ideology = visionary
			popularity = 0.08 #10
		}
		set_party_name = {
			ideology = visionary
			long_name = DEC_vis_ver_name_long
			name = DEC_vis_ver_name
		}
		hidden_effect = {
			country_event = { id = detrotevent.9 days = 40 }
		}
	}

}

country_event = {
	id = detrotevent.9
	title = detrotevent.9.t
	desc = detrotevent.9.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.9.a
		ai_chance = { factor = 50}
		add_stability = -0.04
		modify_timed_idea = {
			idea = DEC_the_consortium_contract
			days = -60
		}
		add_popularity = {
			ideology = visionary
			popularity = -0.1 #20
		}
		
	}

	option = {
		name = detrotevent.9.b
		ai_chance = { factor = 50}
		add_popularity = {
			ideology = visionary
			popularity = 0.1 #0
		}
		
	}
}

country_event = {
	id = detrotevent.10
	title = detrotevent.10.t
	desc = detrotevent.10.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.10.a
		ai_chance = { factor = 100}
		modify_timed_idea = {
			idea = DEC_the_consortium_contract
			days = -20
		}
		add_manpower = 100
	}

	option = {
		name = detrotevent.10.b
		ai_chance = { factor = 100}
		custom_effect_tooltip = DEC_sterling_power_tt
		modify_timed_idea = {
			idea = DEC_the_consortium_contract
			days = 30
		}
		IF = {
			limit = {
				NOT = {
					OR = {
						has_country_flag = DEC_sterling_infl_1_flag
						has_country_flag = DEC_sterling_infl_2_flag
						has_country_flag = DEC_sterling_infl_3_flag
					}
				}
			}
			set_country_flag = DEC_sterling_infl_1_flag
		}
		ELSE_IF = {
			limit = {
				has_country_flag = DEC_sterling_infl_1_flag
			}
			clr_country_flag = DEC_sterling_infl_1_flag
			set_country_flag = DEC_sterling_infl_2_flag
		}
		ELSE_IF = {
			limit = {
				has_country_flag = DEC_sterling_infl_2_flag
			}
			clr_country_flag = DEC_sterling_infl_2_flag
			set_country_flag = DEC_sterling_infl_3_flag
		}
	}
}

country_event = {
	id = detrotevent.11
	title = detrotevent.11.t
	desc = detrotevent.11.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.11.a
		ai_chance = { factor = 100}
		add_timed_idea = {
			idea = DEC_finding_deathbloom_idea
			days = 60
		}
	}

	option = {
		name = detrotevent.11.b
		ai_chance = { factor = 100}
		custom_effect_tooltip = DEC_sterling_power_tt
		add_timed_idea = {
			idea = DEC_finding_deathbloom_idea
			days = 30
		}
		IF = {
			limit = {
				NOT = {
					OR = {
						has_country_flag = DEC_sterling_infl_1_flag
						has_country_flag = DEC_sterling_infl_2_flag
						has_country_flag = DEC_sterling_infl_3_flag
					}
				}
			}
			set_country_flag = DEC_sterling_infl_1_flag
		}
		ELSE_IF = {
			limit = {
				has_country_flag = DEC_sterling_infl_1_flag
			}
			clr_country_flag = DEC_sterling_infl_1_flag
			set_country_flag = DEC_sterling_infl_2_flag
		}
		ELSE_IF = {
			limit = {
				has_country_flag = DEC_sterling_infl_2_flag
			}
			clr_country_flag = DEC_sterling_infl_2_flag
			set_country_flag = DEC_sterling_infl_3_flag
		}
	}
}

country_event = {
	id = detrotevent.12
	title = detrotevent.12.t
	desc = detrotevent.12.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.12.a
		ai_chance = {factor = 100}
		remove_ideas = DEC_the_consortium_contract
		add_ideas = DEC_deathbloom_bribe_idea
		359 = {
			set_demilitarized_zone = no
		}
		68 = {
			set_demilitarized_zone = no
		}
		hidden_effect = {
			remove_ideas = DEC_deathbloom_raiders_1
			remove_ideas = DEC_deathbloom_raiders_3
		}
	}

	option = {
		name = detrotevent.12.b
		ai_chance = { factor = 100}
		remove_ideas = DEC_the_consortium_contract
		add_stability = -0.15
		359 = {
			set_demilitarized_zone = no
		}
		68 = {
			set_demilitarized_zone = no
		}
		hidden_effect = {
			remove_ideas = DEC_deathbloom_raiders_1
			remove_ideas = DEC_deathbloom_raiders_3
			country_event = detrotevent.13
		}
	}
}

country_event = {
	id = detrotevent.13
	title = detrotevent.13.t
	desc = detrotevent.13.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.13.a
		ai_chance = {factor = 100}
		add_popularity = {
			ideology = visionary
			popularity = 0.12
		}
		add_war_support = -0.10
	}
}

country_event = {
	id = detrotevent.14
	title = detrotevent.14.t
	desc = detrotevent.14.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.14.a
		ai_chance = {factor = 100}
		add_popularity = {
			ideology = visionary
			popularity = 0.15
		}
		hidden_effect = {
			country_event = detrotevent.15
		}
	}
}

country_event = {
	id = detrotevent.15
	title = detrotevent.15.t
	desc = detrotevent.15.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.15.a
		ai_chance = {factor = 100}
		set_country_flag = DEC_vermillionist_victory_flag
		set_country_flag = DEC_deactivate_khanate_decisions
		add_popularity = {
			ideology = visionary
			popularity = 0.20
		}
		set_politics = {
			ruling_party = visionary
			elections_allowed = no
		}
		remove_ideas = DEC_the_partnership
		remove_ideas = KHA_lack_of_cohesion_idea
		IF = {
			limit = {
				has_idea = DEC_deathbloom_bribe_idea
			}
			remove_ideas = DEC_deathbloom_bribe_idea
		}
		leave_faction = yes
		set_cosmetic_tag = DEC_worker_syndicate_cosm
		retire_character = DEC_char_threeshot
		every_army_leader = {
			limit = {
				has_trait = consortium_loyalty_trait
			}
			remove_unit_leader = yes
		}
		mark_focus_tree_layout_dirty = yes
	}
}

country_event = {
	id = detrotevent.16
	title = detrotevent.16.t
	desc = detrotevent.16.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.16.a
		ai_chance = {factor = 100}
		set_country_flag = DEC_sterling_victory_flag
		add_popularity = {
			ideology = continuation
			popularity = 0.25
		}
		set_politics = {
			ruling_party = continuation
			elections_allowed = no
		}
		set_capital = {
			state = 152
		}
		set_cosmetic_tag = DEC_sterling_ini_cosm
		mark_focus_tree_layout_dirty = yes
	}
}

country_event = {
	id = detrotevent.17
	title = detrotevent.17.t
	desc = detrotevent.17.d

	trigger = {
		tag = DEC
		OR = {
			has_idea = DEC_deathbloom_raiders_1
			has_idea = DEC_deathbloom_raiders_1
		}
		NOT = { has_idea = DEC_the_consortium_contract }
	}
 	fire_only_once = yes
	immediate = {
		359 = {
			add_core_of = DBB
			set_demilitarized_zone = no
			transfer_state_to = DBB
		}
		68 = {
			add_core_of = DBB
			set_demilitarized_zone = no
			transfer_state_to = DBB
		}
		DBB = {
			load_oob = DBB_revolt_oob
		}
		DEC = {
			transfer_units_fraction= {
				target = DBB
				size = 0.35
				stockpile_ratio = 0.5
				army_ratio = 0.35
				navy_ratio = 0.5
				air_ratio = 0.5
			}
		}
	}

 	option = {
		name = detrotevent.17.a
		ai_chance = {factor = 100}
		DBB = { 
			declare_war_on = {
				target = DEC
				type = annex_everything
			} 
		}
		add_stability = -0.20
		remove_ideas = DEC_deathbloom_raiders_1
		remove_ideas = DEC_deathbloom_raiders_3
	}

	option = {
		name = detrotevent.17.b
		ai_chance = {factor = 0}
		add_stability = -0.20
		remove_ideas = DEC_deathbloom_raiders_1
		remove_ideas = DEC_deathbloom_raiders_3
		DBB = { 
			declare_war_on = {
				target = DEC
				type = annex_everything
			} 
			change_tag_from = DEC
		}
	}
}

country_event = {
	id = detrotevent.18
	title = detrotevent.18.t
	desc = detrotevent.18.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.18.a
		ai_chance = {factor = 100}
		add_ideas = DEC_disrupted_economy_1_idea
		add_timed_idea = {
			idea = DEC_kha_entanglement_idea
			days = 150
		}
		set_country_flag = DEC_please_daddy_vermillion_flag
	}
}

country_event = {
	id = detrotevent.19
	title = detrotevent.19.t
	desc = detrotevent.19.d

	trigger = {
		tag = DEC
		has_country_flag = DEC_please_daddy_vermillion_flag
		COR = {
			exists = yes
		}
		COM = { exists = no }
		COC = { exists = no }
		COL = { exists = no }
	}
 	fire_only_once = yes

 	option = {
		name = detrotevent.19.a
		ai_chance = {factor = 100}
		COR = { country_event = detrotevent.20 }
	}

	option = {
		name = detrotevent.19.b
		ai_chance = {factor = 0}
		custom_effect_tooltip = DEC_no_vermillion_tt
	}
}

country_event = {
	id = detrotevent.20
	title = detrotevent.20.t
	desc = detrotevent.20.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.20.a
		ai_chance = {factor = 100}
		annex_country = {
			target = DEC
			transfer_troops = yes
		}
		Core_original_DEC = yes
		add_stability = -0.05
	}
}

country_event = {
	id = detrotevent.21
	title = detrotevent.21.t
	desc = detrotevent.21.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.21.a
		ai_chance = {factor = 100}
		trigger = {
			check_variable = {
				ARR_khan_loyalty < 2
			} 
		}
		set_country_flag = ARR_DEC_joint_revolt_flag
		DEC = { country_event = detrotevent.22 }
	}

	option = {
		name = detrotevent.21.b
		ai_chance = {factor = 0}
		DEC = { country_event = detrotevent.23 }
	}
}

country_event = {
	id = detrotevent.22
	title = detrotevent.22.t
	desc = detrotevent.22.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.22.a
		ai_chance = {factor = 100}
		
	}
}

country_event = {
	id = detrotevent.23
	title = detrotevent.23.t
	desc = detrotevent.23.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.23.a
		ai_chance = {factor = 100}
		add_war_support = 0.05
	}
}

country_event = {
	id = detrotevent.24
	title = detrotevent.24.t
	desc = detrotevent.24.d

	trigger = {
		tag = ARR
		has_country_flag = ARR_DEC_joint_revolt_flag
		DEC = { has_war_with = KHA }
	}
 	fire_only_once = yes

 	option = {
		name = detrotevent.24.a
		ai_chance = {factor = 100}
		leave_faction = yes
		remove_ideas = KHA_lack_of_cohesion_idea
		set_country_flag = DEC_deactivate_khanate_decisions
		create_wargoal = {
			target = KHA
			type = annex_everything
		}
		add_war_support = 0.10
	}
}

country_event = {
	id = detrotevent.25
	title = detrotevent.25.t
	desc = detrotevent.25.d

	trigger = {
		tag = DEC
		has_completed_focus = DEC_reclaim_the_revolution
		owns_state = 140
		owns_state = 318
		owns_state = 422
	}
 	fire_only_once = yes
	immediate = {
		COR = {
			transfer_state = 140
			hidden_effect = {
				core_original_COL = yes
				core_original_COC = yes
				core_original_COM = yes
			}
		}
	}

 	option = {
		name = detrotevent.25.a
		ai_chance = {factor = 100}
		COR = {
			change_tag_from = DEC
			#Add relevant Ideas for Radicals
		}
		COR = {
			annex_country = {
				target = DEC
				transfer_troops = yes
			}
			every_state = {
				limit = {
					is_core_of = DEC
				}
				add_core_of = COR
			}
		}
		hidden_effect = {
			news_event = detrotevent.26
		}
	}
}

news_event = {
	id = detrotevent.26
	title = detrotevent.26.t
	desc = detrotevent.26.d

	is_triggered_only = yes
 	fire_only_once = yes
	major = yes

 	option = {
		name = detrotevent.26.a
		ai_chance = {factor = 100}
		
	}
}

country_event = {
	id = detrotevent.27
	title = detrotevent.27.t
	desc = detrotevent.27.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.27.a
		ai_chance = {factor = 100}
		
	}
}

country_event = {
	id = detrotevent.28
	title = detrotevent.28.t
	desc = detrotevent.28.d

	trigger = {
		tag = DEC
		has_war_with = PHE
		has_country_flag = DEC_PHE_war_flag
		PHE = {
			controls_state = 68
			controls_state = 359
		}
	}
 	fire_only_once = yes

 	option = {
		name = detrotevent.28.a
		ai_chance = {factor = 100}
		clr_country_flag = DEC_PHE_war_flag
		white_peace = PHE
		PHE = {
			transfer_state = 68
			transfer_state = 359
			country_event = detrotevent.29
		}
		KHA = { country_event = detrotevent.30 }
	}
	option = {
		name = detrotevent.28.b
		ai_chance = {factor = 0}
		leave_faction = yes
		remove_ideas = KHA_lack_of_cohesion_idea
		KHA = {
			add_state_claim = 361
			add_state_claim = 152
			create_wargoal = {
				target = DEC
				type = annex_everything
			}
			unlock_national_focus = KHA_dissolve_triad
		}
		hidden_effect = {
			PHE = {
				add_state_claim = 68
				add_state_claim = 359
			}
		}
	}
}

country_event = {
	id = detrotevent.29
	title = detrotevent.29.t
	desc = detrotevent.29.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.29.a
		ai_chance = {factor = 100}
		
	}
}

country_event = {
	id = detrotevent.30
	title = detrotevent.30.t
	desc = detrotevent.30.d

	is_triggered_only = yes
 	fire_only_once = yes

 	option = {
		name = detrotevent.30.a
		ai_chance = {factor = 100}
		annex_country = {
			target = DEC
			transfer_troops = no
		}
		unlock_national_focus = KHA_dissolve_triad
	}
}